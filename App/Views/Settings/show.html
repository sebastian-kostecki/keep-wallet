{% extends "baseApp.html" %}

{% block title %}Ustawienia{% endblock %}

{% block pageTitle %}
<h1 class="display-6">Ustawienia</h1>
{% endblock %}

{% block body %}
<div class="container-fluid settings-container p-1 p-lg-0 fs-5 me-3">
    <div class="col-12">
        <ul class="p-0">
            <div class="pt-2 pb-1 mb-1 me-3">
                <div id="user-settings" class="setting-list p-2 rounded">
                    <li class="fs-5 m-0 position-relative">
                        <i class="fas fa-user me-2"></i>
                        <span>Użytkownik</span>
                        <div class="position-absolute top-50 end-0 translate-middle-y pe-2">
                            <i class="fas fa-angle-down"></i>
                            <i class="fas fa-angle-up"></i>
                        </div>
                    </li>
                </div>
                <div class="user-settings settings-form mt-2">
                    <form action="/settings/change-user-data" method="post" class="single-form">
                        <div class="input-group mb-2">
                            <span class="input-group-text border-0 px-3 py-2"><i class="fas fa-user"></i></span>
                            <input type="text" class="form-control border-0 p-2 ms-0 text-white"
                                placeholder="Zmień nazwę użytkownika" name="login">
                        </div>
                        <div class="input-group mb-2 border-0">
                            <span class="input-group-text border-0 px-3 py-2"><i class="fas fa-lock"></i></span>
                            <input type="password" id="password-input"
                                class="form-control border-0 p-2 ms-0 text-white rounded-end" placeholder="Zmień hasło"
                                name="password">
                            <button type="button"
                                class="hidden-password settings-hidden me-2 p-2 fs-4 position-absolute top-0 end-0"><i
                                    class="fas fa-eye-slash"></i></button>
                            <button type="button"
                                class="showed-password settings-showed me-2 p-2 fs-4 position-absolute top-0 end-0">
                                <i class="fas fa-eye"></i></button>
                        </div>
                        <button type="submit"
                            class="btn button-normal border-0 px-3 py-2 text-uppercase fw-bold w-100">Zapisz</button>
                    </form>
                </div>
            </div>
            <div class="py-1 mb-1 me-3">
                <div id="incomes-category-settings" class="setting-list p-2 rounded">
                    <li class="fs-5 m-0 position-relative">
                        <i class="fas fa-bookmark me-2"></i>
                        <span>Kategorie przychodów</span>
                        <div class="position-absolute top-50 end-0 translate-middle-y pe-2">
                            <i class="fas fa-angle-down"></i>
                            <i class="fas fa-angle-up"></i>
                        </div>
                    </li>
                </div>
                <div class="incomes-category-settings settings-form mt-2">
                    <ul class="list-unstyled input-group single-form">
                        {% for category in incomeCategories %}
                        <li
                            class="id-category-{{ category.id }} category-of-settings category-label text-uppercase rounded w-100 position-relative fs-6 mb-2 py-2 px-3">
                            <i class="{{ category.icon }} me-2 settings-icon-for-name-category"></i>
                            <span>{{ category.name }}</span>
                            <div class="position-absolute top-50 end-0 translate-middle-y pe-2 d-flex justify-content">
                                <button id="change-income-category"
                                    class="button-change-category btn p-0 text-white border-0 bg-success">
                                    <i class="change-category fas fa-pen p-1 fs-3 rounded align-middle"></i>
                                </button>
                                <button id="delete-income-category"
                                    class="button-remove-category btn p-0 text-white border-0 bg-danger ms-2">
                                    <i class="remove-category fas fa-trash-alt p-1 fs-3 rounded align-middle"></i>
                                </button>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                    <button id="add-income-category"
                        class="btn button-add-element button-normal border-0 px-3 py-2 text-uppercase w-100 text-start">
                        <i class="fas fa-plus me-2"></i>
                        <span>Dodaj nową kategorię przychodów</span>
                    </button>
                </div>
            </div>
            <div class="py-1 mb-1 me-3">
                <div id="expenses-category-settings" class="setting-list p-2 rounded">
                    <li class="fs-5 m-0 position-relative">
                        <i class="fas fa-bookmark me-2"></i>
                        <span>Kategorie wydatków</span>
                        <div class="position-absolute top-50 end-0 translate-middle-y pe-2">
                            <i class="fas fa-angle-down"></i>
                            <i class="fas fa-angle-up"></i>
                        </div>
                    </li>
                </div>
                <div class="expenses-category-settings settings-form mt-2">
                    <ul class="list-unstyled input-group single-form">
                        {% for category in expenseCategories %}
                        <li
                            class="id-category-{{ category.id }} category-of-settings category-label text-uppercase rounded w-100 position-relative fs-6 mb-2 py-2 px-3">
                            <i class="{{ category.icon }} me-2 settings-icon-for-name-category"></i>
                            <span>{{ category.name }}</span>
                            <div class="position-absolute top-50 end-0 translate-middle-y pe-2 d-flex justify-content">
                                <button id="change-expense-category"
                                    class="button-change-category btn p-0 text-white border-0 bg-success">
                                    <i class="change-category fas fa-pen p-1 fs-3 rounded align-middle"></i>
                                </button>
                                <button id="delete-expense-category"
                                    class="button-remove-category btn p-0 text-white border-0 bg-danger ms-2">
                                    <i class="remove-category fas fa-trash-alt p-1 fs-3 rounded align-middle"></i>
                                </button>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                    <button id="add-expense-category"
                        class="btn button-add-element button-normal border-0 px-3 py-2 text-uppercase w-100 text-start">
                        <i class="fas fa-plus me-2"></i>
                        <span>Dodaj nową kategorię wydatków</span>
                    </button>
                </div>
            </div>
            <div class="py-1 mb-1 me-3">
                <div id="payment-methods-settings" class="setting-list p-2 rounded">
                    <li class="fs-5 m-0 position-relative">
                        <i class="fas fa-credit-card me-2"></i>
                        <span>Sposoby płatności</span>
                        <div class="position-absolute top-50 end-0 translate-middle-y pe-2">
                            <i class="fas fa-angle-down"></i>
                            <i class="fas fa-angle-up"></i>
                        </div>
                    </li>
                </div>
                <div class="payment-methods-settings settings-form mt-2">
                    <ul class="list-unstyled input-group single-form">
                        {% for category in paymentMethods %}
                        <li
                            class="id-category-{{ category.id }} category-of-settings category-label text-uppercase rounded w-100 position-relative fs-6 mb-2 py-2 px-3">
                            <i class="{{ category.icon }} me-2 settings-icon-for-name-category"></i>
                            <span>{{ category.name }}</span>
                            <div class="position-absolute top-50 end-0 translate-middle-y pe-2 d-flex justify-content">
                                <button id="change-payment-method"
                                    class="button-change-category btn p-0 text-white border-0 bg-success">
                                    <i class="change-category fas fa-pen p-1 fs-3 rounded align-middle"></i>
                                </button>
                                <button id="delete-payment-method"
                                    class="button-remove-category btn p-0 text-white border-0 bg-danger ms-2">
                                    <i class="remove-category fas fa-trash-alt p-1 fs-3 rounded align-middle"></i>
                                </button>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                    <button id="add-payment-method"
                        class="btn button-add-element button-normal border-0 px-3 py-2 text-uppercase w-100 text-start">
                        <i class="fas fa-plus me-2"></i>
                        <span>Dodaj nowy sposób płatności</span>
                    </button>
                </div>
            </div>
        </ul>
    <div class="modal fade" id="modalCreateChangeCategory" tabindex="-1" aria-labelledby="modal-create-change-category"
        aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalAddElementLabel">Wybierz ikonę oraz nazwę</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="container-fluid p-0">
                        <form id="form-add-change-category" method="post">
                            <div class="d-flex flex-wrap">
                                {% for icon in icons %}
                                <div class="form-check-inline categories mb-2 me-2 flex-grow-1">
                                    <input type="radio" class="form-check-input icon-to-chosen-in-modal" name="icon"
                                        id="{{ icon.icon }}" value="{{ icon.icon }}" required>
                                    <label for="{{ icon.icon }}"
                                        class="form-check-label text-uppercase px-3 py-2 rounded w-100 text-center fs-2"
                                        role="button"><i class="{{ icon.icon }} me-2"></i></label>
                                </div>
                                {% endfor %}
                            </div>
                            <div>
                                <input id="previousCategoryId" type="hidden" name="previousCategory">
                                <input type="text" class="form-control" name="nameCategory" placeholder="Wpisz nazwę">
                            </div>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn button-outline" data-bs-dismiss="modal">Zamknij</button>
                    <button type="button" class="button-confirm-modal btn button-normal">Zapisz</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="confirmRemoving" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Czy na pewno chcesz usunąć?</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="" method="post">
                        <input id="categoryIdToRemove" type="hidden" name="id">
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn button-outline" data-bs-dismiss="modal">Zamknij</button>
                    <button type="button" class="button-confirm-modal btn button-normal">Potwierdź</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block footer %}
<script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.15.0/jquery.validate.min.js"></script>
<script src="/js/hideShowPassword.js"></script>
<script src="/js/hideShowSettings.js"></script>
<script src="\js\validateSettings.js"></script>
<script src="/js/settings.js"></script>
{% endblock %}
